<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LED Broadcast System - Live Demo</title>
    <meta name="description" content="Demo of a 1000+ LED screen broadcasting system with real video upload">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#2563eb">
    <link rel="manifest" href="manifest.json">
    
    <!-- Icons -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ“º</text></svg>">
    
    <!-- Styles -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Video.js for better video handling -->
    <link href="https://vjs.zencdn.net/8.6.1/video-js.css" rel="stylesheet" />
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loader">
            <div class="led-grid">
                <div class="led"></div><div class="led"></div><div class="led"></div>
                <div class="led"></div><div class="led"></div><div class="led"></div>
                <div class="led"></div><div class="led"></div><div class="led"></div>
            </div>
            <h2>Initializing LED Broadcast System</h2>
            <p>Loading demo assets...</p>
        </div>
    </div>

    <div class="container" style="display: none;">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <i class="fas fa-broadcast-tower"></i>
                <div>
                    <h1>LED Broadcast System</h1>
                    <p class="subtitle">Managing 1000+ LED Screens â€¢ GitHub Pages Demo</p>
                </div>
            </div>
            
            <div class="header-controls">
                <div class="github-badge">
                    <i class="fab fa-github"></i>
                    <span>GitHub Pages</span>
                </div>
                <button class="btn btn-sm" onclick="exportDemo()">
                    <i class="fas fa-download"></i> Export
                </button>
                <button class="btn btn-sm btn-primary" onclick="toggleFullscreen()">
                    <i class="fas fa-expand"></i> Fullscreen
                </button>
            </div>
        </header>

        <!-- Stats Bar -->
        <div class="stats-bar">
            <div class="stat">
                <i class="fas fa-tv"></i>
                <div>
                    <span class="stat-value" id="total-screens">0</span>
                    <span class="stat-label">Screens</span>
                </div>
            </div>
            <div class="stat">
                <i class="fas fa-wifi"></i>
                <div>
                    <span class="stat-value" id="online-screens">0</span>
                    <span class="stat-label">Online</span>
                </div>
            </div>
            <div class="stat">
                <i class="fas fa-video"></i>
                <div>
                    <span class="stat-value" id="total-content">2</span>
                    <span class="stat-label">Videos</span>
                </div>
            </div>
            <div class="stat">
                <i class="fas fa-database"></i>
                <div>
                    <span class="stat-value" id="storage-used">0MB</span>
                    <span class="stat-label">Storage</span>
                </div>
            </div>
            <div class="stat">
                <i class="fas fa-clock"></i>
                <div>
                    <span class="stat-value" id="uptime">00:00</span>
                    <span class="stat-label">Uptime</span>
                </div>
            </div>
        </div>

        <!-- Main Dashboard -->
        <div class="dashboard">
            <!-- Left Column: Screen Management -->
            <div class="column">
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-tv"></i> Screen Management</h2>
                        <div class="card-actions">
                            <button class="btn btn-primary btn-sm" onclick="addScreen()">
                                <i class="fas fa-plus"></i> Add Screen
                            </button>
                            <div class="dropdown">
                                <button class="btn btn-sm"><i class="fas fa-ellipsis-v"></i></button>
                                <div class="dropdown-content">
                                    <a onclick="bulkAddScreens(10)">Add 10 Screens</a>
                                    <a onclick="bulkAddScreens(50)">Add 50 Screens</a>
                                    <a onclick="simulateNetwork('disconnect')">Simulate Disconnect</a>
                                    <a onclick="resetScreens()">Reset All</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="screen-controls">
                        <div class="search-box">
                            <i class="fas fa-search"></i>
                            <input type="text" id="screen-search" placeholder="Search screens..." 
                                   oninput="filterScreens(this.value)">
                        </div>
                        <div class="filter-tabs">
                            <button class="filter-btn active" onclick="setScreenFilter('all')">All</button>
                            <button class="filter-btn" onclick="setScreenFilter('online')">Online</button>
                            <button class="filter-btn" onclick="setScreenFilter('offline')">Offline</button>
                            <button class="filter-btn" onclick="setScreenFilter('playing')">Playing</button>
                        </div>
                    </div>
                    
                    <div class="screen-list-container">
                        <div class="screen-list" id="screen-list">
                            <!-- Screens will be added here -->
                        </div>
                        <div class="empty-state" id="no-screens">
                            <i class="fas fa-tv fa-4x"></i>
                            <h3>No Screens Connected</h3>
                            <p>Add your first LED screen to start broadcasting</p>
                            <button class="btn btn-primary" onclick="addScreen()">
                                <i class="fas fa-plus"></i> Add First Screen
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Live Preview -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-eye"></i> Live Preview</h2>
                        <div class="card-actions">
                            <button class="btn btn-sm" onclick="refreshPreview()">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                    </div>
                    <div class="preview-container">
                        <div class="preview-screen" id="preview-screen">
                            <div class="preview-content">
                                <video id="preview-video" class="video-js" controls preload="auto">
                                    <p class="vjs-no-js">
                                        To view this video please enable JavaScript
                                    </p>
                                </video>
                                <div class="preview-info">
                                    <div class="preview-title">No Content Playing</div>
                                    <div class="preview-meta">Select a screen to preview</div>
                                </div>
                            </div>
                        </div>
                        <div class="preview-controls">
                            <select id="preview-select" onchange="changePreviewScreen(this.value)">
                                <option value="">Select Screen to Preview</option>
                            </select>
                            <button class="btn btn-sm" onclick="takeScreenshot()">
                                <i class="fas fa-camera"></i> Screenshot
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Middle Column: Content & Broadcast -->
            <div class="column">
                <!-- Video Upload Card -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-cloud-upload-alt"></i> Video Upload</h2>
                        <div class="card-actions">
                            <span class="badge" id="upload-count">0 videos</span>
                        </div>
                    </div>
                    
                    <div class="upload-section">
                        <div class="upload-area" id="upload-area">
                            <div class="upload-icon">
                                <i class="fas fa-file-video"></i>
                            </div>
                            <h3>Drop Video Files Here</h3>
                            <p>Supports MP4, WebM, MOV â€¢ Max 100MB</p>
                            <input type="file" id="video-upload" multiple accept="video/*" hidden>
                            <button class="btn btn-primary" onclick="document.getElementById('video-upload').click()">
                                <i class="fas fa-folder-open"></i> Browse Files
                            </button>
                            <p class="upload-note">Or drag and drop videos here</p>
                        </div>
                        
                        <div class="upload-progress" id="upload-progress">
                            <!-- Progress bars will be added here -->
                        </div>
                        
                        <div class="upload-tips">
                            <h4><i class="fas fa-lightbulb"></i> Upload Tips:</h4>
                            <ul>
                                <li>Use MP4 with H.264 codec for best compatibility</li>
                                <li>Recommended resolution: 1920x1080 (1080p)</li>
                                <li>Keep videos under 2 minutes for digital signage</li>
                                <li>Add subtitles for sound-off environments</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Content Library -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-photo-video"></i> Content Library</h2>
                        <div class="card-actions">
                            <button class="btn btn-sm" onclick="refreshLibrary()">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="content-grid" id="content-grid">
                        <!-- Content items will be added here -->
                    </div>
                    
                    <div class="empty-state" id="no-content">
                        <i class="fas fa-video fa-4x"></i>
                        <h3>No Videos Uploaded</h3>
                        <p>Upload your first video to start broadcasting</p>
                        <button class="btn btn-primary" onclick="document.getElementById('video-upload').click()">
                            <i class="fas fa-upload"></i> Upload First Video
                        </button>
                    </div>
                </div>
            </div>

            <!-- Right Column: Broadcast & Monitoring -->
            <div class="column">
                <!-- Broadcast Control -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-satellite-dish"></i> Broadcast Control</h2>
                        <div class="card-actions">
                            <span class="badge live" id="broadcast-status">IDLE</span>
                        </div>
                    </div>
                    
                    <div class="broadcast-form">
                        <div class="form-group">
                            <label><i class="fas fa-video"></i> Select Content</label>
                            <select id="broadcast-content" class="form-control">
                                <option value="">Choose a video...</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label><i class="fas fa-tv"></i> Target Screens</label>
                            <div class="screen-selection" id="screen-selection">
                                <!-- Screen checkboxes will be added here -->
                            </div>
                            <div class="selection-actions">
                                <button class="btn btn-sm" onclick="selectAllScreens()">Select All</button>
                                <button class="btn btn-sm" onclick="clearSelection()">Clear All</button>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label><i class="fas fa-clock"></i> Schedule</label>
                            <div class="schedule-options">
                                <label class="radio-option">
                                    <input type="radio" name="schedule" value="immediate" checked>
                                    <span>Immediate</span>
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="schedule" value="scheduled">
                                    <span>Scheduled</span>
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="schedule" value="recurring">
                                    <span>Recurring</span>
                                </label>
                            </div>
                            
                            <div class="schedule-details" id="schedule-details">
                                <input type="datetime-local" id="schedule-time" class="form-control">
                                <div class="recurring-options" style="display: none;">
                                    <select id="recurring-frequency" class="form-control">
                                        <option value="daily">Daily</option>
                                        <option value="weekly">Weekly</option>
                                        <option value="monthly">Monthly</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <button class="btn btn-broadcast" onclick="startBroadcast()" id="broadcast-btn">
                            <i class="fas fa-play-circle"></i> START BROADCAST
                        </button>
                        
                        <div class="broadcast-info">
                            <p><i class="fas fa-info-circle"></i> This will send content to <span id="selected-count">0</span> selected screens</p>
                        </div>
                    </div>
                </div>

                <!-- System Monitor -->
                <div class="card">
                    <div class="card-header">
                        <h2><i class="fas fa-chart-line"></i> System Monitor</h2>
                        <div class="card-actions">
                            <button class="btn btn-sm" onclick="clearLogs()">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                    
                    <div class="monitor-panel">
                        <div class="system-status">
                            <div class="status-item">
                                <div class="status-label">API Server</div>
                                <div class="status-indicator active" id="api-status"></div>
                            </div>
                            <div class="status-item">
                                <div class="status-label">Streaming</div>
                                <div class="status-indicator" id="stream-status"></div>
                            </div>
                            <div class="status-item">
                                <div class="status-label">Database</div>
                                <div class="status-indicator active" id="db-status"></div>
                            </div>
                            <div class="status-item">
                                <div class="status-label">Storage</div>
                                <div class="status-indicator active" id="storage-status"></div>
                            </div>
                        </div>
                        
                        <div class="log-container">
                            <div class="log-header">
                                <h4>Activity Log</h4>
                                <div class="log-filters">
                                    <span class="filter-tag active" onclick="filterLogs('all')">All</span>
                                    <span class="filter-tag" onclick="filterLogs('info')">Info</span>
                                    <span class="filter-tag" onclick="filterLogs('success')">Success</span>
                                    <span class="filter-tag" onclick="filterLogs('warning')">Warning</span>
                                    <span class="filter-tag" onclick="filterLogs('error')">Error</span>
                                </div>
                            </div>
                            <div class="log-window" id="log-window">
                                <!-- Logs will be added here -->
                            </div>
                        </div>
                        
                        <div class="resource-monitor">
                            <h4>Resource Usage</h4>
                            <div class="resource-item">
                                <span>CPU</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="cpu-usage" style="width: 30%"></div>
                                </div>
                                <span>30%</span>
                            </div>
                            <div class="resource-item">
                                <span>Memory</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="memory-usage" style="width: 45%"></div>
                                </div>
                                <span>45%</span>
                            </div>
                            <div class="resource-item">
                                <span>Bandwidth</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="bandwidth-usage" style="width: 15%"></div>
                                </div>
                                <span>15%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-left">
                <p>LED Broadcast System Demo â€¢ Built for GitHub Pages â€¢ <span id="connection-status">Online</span></p>
                <p class="footer-note">This is a demonstration. No actual LED screens are controlled.</p>
            </div>
            <div class="footer-right">
                <button class="btn btn-sm" onclick="showHelp()">
                    <i class="fas fa-question-circle"></i> Help
                </button>
                <button class="btn btn-sm" onclick="togglePlayer()">
                    <i class="fas fa-tv"></i> Player Sim
                </button>
                <button class="btn btn-sm btn-danger" onclick="resetDemo()">
                    <i class="fas fa-redo"></i> Reset Demo
                </button>
            </div>
        </footer>

        <!-- Video Player Modal -->
        <div class="player-modal" id="player-modal">
            <div class="player-container">
                <div class="player-header">
                    <h3><i class="fas fa-tv"></i> LED Screen Simulator</h3>
                    <button class="btn btn-sm" onclick="togglePlayer()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="player-body">
                    <div class="player-frame">
                        <video id="player-video" class="video-js vjs-default-skin" controls preload="auto">
                            <p class="vjs-no-js">
                                To view this video please enable JavaScript
                            </p>
                        </video>
                        <div class="player-overlay">
                            <div class="player-info">
                                <div class="info-item">
                                    <span>Screen ID:</span>
                                    <span id="player-screen-id">SCREEN-0001</span>
                                </div>
                                <div class="info-item">
                                    <span>Status:</span>
                                    <span class="status-badge online" id="player-status">PLAYING</span>
                                </div>
                                <div class="info-item">
                                    <span>Content:</span>
                                    <span id="player-content">Demo Advertisement</span>
                                </div>
                                <div class="info-item">
                                    <span>Location:</span>
                                    <span id="player-location">Times Square</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="player-controls">
                        <button class="btn" onclick="simulateScreenEvent('connect')">
                            <i class="fas fa-plug"></i> Connect
                        </button>
                        <button class="btn" onclick="simulateScreenEvent('disconnect')">
                            <i class="fas fa-unlink"></i> Disconnect
                        </button>
                        <button class="btn" onclick="simulateScreenEvent('play')">
                            <i class="fas fa-play"></i> Play
                        </button>
                        <button class="btn" onclick="simulateScreenEvent('stop')">
                            <i class="fas fa-stop"></i> Stop
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Help Modal -->
        <div class="modal" id="help-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2><i class="fas fa-question-circle"></i> Demo Guide</h2>
                    <button class="btn btn-sm" onclick="closeHelp()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="guide-section">
                        <h3>How to Use This Demo:</h3>
                        <ol>
                            <li><strong>Add Screens:</strong> Click "Add Screen" or use bulk add</li>
                            <li><strong>Upload Videos:</strong> Drag & drop or click to upload</li>
                            <li><strong>Select Content:</strong> Choose from your library</li>
                            <li><strong>Choose Screens:</strong> Select target screens</li>
                            <li><strong>Schedule:</strong> Set immediate or scheduled broadcast</li>
                            <li><strong>Broadcast:</strong> Click "Start Broadcast"</li>
                            <li><strong>Monitor:</strong> Watch activity logs and preview</li>
                        </ol>
                    </div>
                    
                    <div class="guide-section">
                        <h3>GitHub Pages Features:</h3>
                        <ul>
                            <li>âœ… <strong>100% Client-side:</strong> No server required</li>
                            <li>âœ… <strong>Real Video Upload:</strong> Uses browser File API</li>
                            <li>âœ… <strong>Local Storage:</strong> Data persists between sessions</li>
                            <li>âœ… <strong>Offline Capable:</strong> Works without internet</li>
                            <li>âœ… <strong>Responsive:</strong> Works on all devices</li>
                            <li>âœ… <strong>Export/Import:</strong> Save and load configurations</li>
                        </ul>
                    </div>
                    
                    <div class="guide-section">
                        <h3>Simulation Features:</h3>
                        <ul>
                            <li>Simulates 1000+ LED screens</li>
                            <li>Real-time status updates</li>
                            <li>Network failure simulation</li>
                            <li>Resource usage monitoring</li>
                            <li>Screen preview with actual video</li>
                            <li>Broadcast scheduling</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://vjs.zencdn.net/8.6.1/video.min.js"></script>
    <script src="upload-handler.js"></script>
    <script src="github-pages-config.js"></script>
    <script src="script.js"></script>
    
    <!-- Initialize when page loads -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Show loading screen for 2 seconds
            setTimeout(() => {
                document.getElementById('loading-screen').style.display = 'none';
                document.querySelector('.container').style.display = 'block';
                initDemo();
            }, 2000);
            
            // Register service worker for offline support
            if ('serviceWorker' in navigator) {
                navigator.serviceWorker.register('service-worker.js')
                    .then(() => console.log('Service Worker Registered'))
                    .catch(err => console.log('Service Worker Registration Failed:', err));
            }
        });
    </script>
</body>
</html>